{
  "kind": "build_request",
  "title": "Grant admin access to specified Principal ID and persist across upgrades",
  "priority": "high",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Update the backend authorization so the Principal `ksdex-jr3fp-ll2uw-hoqgv-wlwa7-erlfc-juio3-m33lu-7dqc7-hzatt-uqe` is registered/granted admin permissions during canister initialization, so that admin checks and admin-gated methods allow this Principal.",
      "target": "backend",
      "source": {
        "messageIds": [
          "recent-messages-5"
        ],
        "quotes": [
          "YESS ADD PLEASE"
        ]
      },
      "acceptanceCriteria": [
        "When authenticated as Principal `ksdex-jr3fp-ll2uw-hoqgv-wlwa7-erlfc-juio3-m33lu-7dqc7-hzatt-uqe`, the backend method `isCallerAdmin()` returns `true`.",
        "When authenticated as that Principal, calling admin-gated methods (`getAllOrders`, `importProducts`, `addProduct`, `getAllInquiries`) does not trap with unauthorized errors.",
        "When authenticated as that Principal, the frontend Admin Dashboard route renders the admin content instead of the \"Access Denied\" guard state."
      ]
    },
    {
      "id": "REQ-2",
      "text": "Ensure the admin grant/allowlist entry for Principal `ksdex-jr3fp-ll2uw-hoqgv-wlwa7-erlfc-juio3-m33lu-7dqc7-hzatt-uqe` persists across canister upgrades/redeploys; add or adjust `backend/migration.mo` only if required by the current upgrade path so the Principal remains an admin after upgrade without manual reconfiguration.",
      "target": "backend",
      "source": {
        "messageIds": [
          "recent-messages-4",
          "recent-messages-5"
        ],
        "quotes": [
          "should I add this Principal ID as the admin?\n\nksdex-jr3fp-ll2uw-hoqgv-wlwa7-erlfc-juio3-m33lu-7dqc7-hzatt-uqe",
          "YESS ADD PLEASE"
        ]
      },
      "acceptanceCriteria": [
        "After performing a canister upgrade, authenticating as Principal `ksdex-jr3fp-ll2uw-hoqgv-wlwa7-erlfc-juio3-m33lu-7dqc7-hzatt-uqe` still results in `isCallerAdmin()` returning `true`.",
        "After performing a canister upgrade, admin-gated methods still succeed (no unauthorized trap) for that Principal."
      ]
    }
  ],
  "constraints": [
    "Backend must remain a single Motoko actor with all logic in `backend/main.mo`.",
    "Create or modify `backend/migration.mo` only if needed to preserve/upgrade existing state (conditional migration policy).",
    "Do not edit files under `frontend/src/components/ui` or the immutable hook/entry files listed in SYSTEM_CONTEXT."
  ],
  "nonGoals": [
    "Adding a UI for managing admins (grant/revoke) in the admin dashboard.",
    "Supporting multiple admins beyond the explicitly provided Principal ID.",
    "Adding third-party authentication; only Internet Identity is used."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  },
  "userProfileUpdate": {
    "goalsToAdd": [],
    "goalsToRemove": [],
    "preferencesToAdd": [],
    "preferencesToRemove": [],
    "miscToAdd": [],
    "miscToRemove": [],
    "fieldsToSet": {},
    "fieldsToDelete": []
  }
}